<script>
  async function sendTo(character: string) {
    const input = document.getElementById("userInput") as HTMLInputElement;
    const chatBox = document.getElementById("chatOutput") as HTMLElement;

    if (!input || !chatBox) return;

    const message = input.value;

    const res = await fetch("/.netlify/functions/askOpenAI", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ character, message }),
    });

    const reply = await res.text();
    chatBox.textContent = reply;
  }
</script>
